<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tree folder List</title>
    <style>
        ul, ol, li {
            padding: 0;
            list-style-type: none;
        }

        .virtual-tree-container {
            height: 400px;
            box-sizing: border-box;
            overflow-y: scroll;
            border-radius: 4px;
            box-shadow: 0 0 0 4px #f6dc8e;
        }

        .virtual-tree-container .virtual-tree-item {
            /* height: 60px; */
            margin: 4px;
            font-size: 24px;
            font-weight: bold;
            background-color: #f7ee99;
            line-height: 60px;
            text-align: center;
            border-radius: 4px;
        }

        .folder-arrow {
            display: inline-block;
            width: 16px;
            height: 16px;
            margin: 4px 0;
            cursor: pointer;
            background-image: url(../img/arrow.svg);
            background-size: cover;
            background-position: center;
            user-select: none;
            transform: rotate(90deg);
        }

        .folder-arrow.floding {
            margin: 0;
            transform: rotate(0deg);
        }

        .checkbox {
            display: inline-block;
            width: 16px;
            height: 16px;
            cursor: pointer;
            background-image: url(../img/check-box-outline-blank.svg);
            background-size: cover;
            background-position: center;
            user-select: none;
        }

        .checkbox.checked {
            background-image: url(../img/check-box-checked.svg);
        }

        .checkbox.partial {
            background-image: url(../img/checkbox-partial.svg);
        }

        .item-text {
            display: inline-block;
            cursor: pointer;
            /* transform: translate3d(0, 0, 0); */
        }

        .hight-line,
        .item-select {
            outline: 2px solid #2196F3;
            /* box-shadow: 0 0 0 3px #2196F3; */
        }
    </style>
</head>

<body>
    <div id="app"></div>
    
    <script type="text/x-template" id="tree-item-template">
        <div :style="indentClass">
            <span 
                class="folder-arrow"
                :class="{'floding': !itemData.expand}"
                v-if="itemData.children.length > 0"
                @click="itemData.expand = !itemData.expand"
            ></span>
            
            <span
                class="checkbox"
                :class="checkStatus"
                @click="toggleCheck"
            ></span>
            <span
                class="item-text"
                @click="toggleSelect"
                :class="{'item-select': itemData.selected}"
            >{{ itemData.value }}</span>
        </div>
    </script>

    <script type="text/x-template" id="virtual-view-template">
        <div class="virtual-tree-container" 
            @scroll.passive="updateScrollTop"
        >
            <div :style="paddingStyle">
                <tree-item 
                    v-for="(itemData, index) in currentViewList"
                    :key="index"
                    :style="{height: itemHeight + 'px'}"
                    :itemData="itemData"
                ></tree-item>
            </div>
        </div>
    </script>

    <script type="text/x-template" id="tree-list-template">
        <div class="tree-list-container">
            <virtual-view 
                :itemHeight="60"
                :viewList="flatTree"
                :viewHeight="400"
            ></virtual-view>
        </div>
    </script>


    <script src="../lib/vue.js"></script>
    <script src="../mock/pcas-code.js"></script>
    <script src="./tree-list.js"></script>
    <script src="./tree-item.js"></script>
    <script src="./virtual-view.js"></script>
    <script src="./index.js"></script>
</body>

</html>